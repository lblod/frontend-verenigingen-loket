<div class="au-o-box au-o-flow au-o-flow--large">
  <section class="au-u-flex au-u-flex--between">
    <div>
      <AuHeading @level="1" @skin="1">Algemeen</AuHeading>
      <AuHeading
        @level="3"
        @skin="3"
      >{{this.model.association.name}}</AuHeading>
    </div>
    <div
      class="au-u-flex au-u-flex--end au-u-flex--column au-u-flex--vertical-end"
    >
      <ReportWrongData @model={{this.model.association}} />
    </div>
  </section>
  <section>
    <DataCard>
      <:title>
        <div class="au-u-flex au-u-flex--between au-u-flex--vertical-end">
          Huidige erkenning
          {{#if this.recognition}}
            {{#if
              (check-if-active
                this.recognition.validityPeriod.startTime
                this.recognition.validityPeriod.endTime
              )
            }}
              <AuLink
                class="au-u-margin-bottom-tiny"
                @skin="button-secondary"
                @icon="pencil"
                @model={{this.recognition.id}}
                @route="association.recognition.create"
              >
                Bewerk
              </AuLink>
            {{else}}
              <AuLink
                class="au-u-margin-bottom-tiny"
                @skin="button-secondary"
                @icon="plus"
                @model="0"
                @route="association.recognition.create"
              >
                Voeg nieuwe erkenning toe
              </AuLink>
            {{/if}}
          {{/if}}
        </div>
      </:title>
      <:card as |Card|>
        {{#if this.recognition}}
          {{#if
            (check-if-active
              this.recognition.validityPeriod.startTime
              this.recognition.validityPeriod.endTime
            )
          }}
            <Card.Columns>
              <:left as |Item|>
                <Item>
                  <:label>Status</:label>
                  <:content>
                    <AuPill @skin="success">Erkend</AuPill>
                  </:content>
                </Item>
                <Item>
                  <:label>Ingangsdatum</:label>
                  <:content>
                    {{date-format this.recognition.validityPeriod.startTime}}
                  </:content>
                </Item>
                <Item>
                  <:label>Erkend door</:label>
                  <:content>
                    {{this.recognition.awardedBy.name}}
                  </:content>
                </Item>
              </:left>
              <:right as |Item|>
                <Item>
                  <:label>Erkend op</:label>
                  <:content>
                    {{date-format this.recognition.dateDocument}}
                  </:content>
                </Item>
                <Item>
                  <:label>Einddatum</:label>
                  <:content>
                    {{date-format this.recognition.validityPeriod.endTime}}
                  </:content>
                </Item>
                {{#if this.recognition.legalResource}}
                  <Item>
                    <:label>Erkenningsbesluit</:label>
                    <:content>
                      <AuLinkExternal
                        href={{this.recognition.legalResource}}
                        @icon="external-link"
                      >
                        Beslissing (externe link)
                      </AuLinkExternal>
                    </:content>
                  </Item>
                {{/if}}
              </:right>
            </Card.Columns>
          {{else}}
            <Card.Columns>
              <:left as |Item|>
                <Item>
                  <:label>Status</:label>
                  <:content>
                    <AuPill @skin="warning">Niet erkend</AuPill>
                  </:content>
                </Item>
              </:left>
              <:right as |Item|>
                <Item>
                  <:label>Sluitingsdatum</:label>
                  <:content>
                    {{date-format this.recognition.validityPeriod.endTime}}
                  </:content>
                </Item>

              </:right>
            </Card.Columns>
          {{/if}}
        {{else}}
          <div class="au-u-flex au-u-flex--center">
            <p><span
                class="au-c-help-text--tertiary au-u-padding-right-tiny"
              >Deze vereniging heeft geen erkenning.</span>
              <AuLink
                @skin="link"
                @model="0"
                @route="association.recognition.create"
              >
                Voeg de erkenning toe.
              </AuLink>
            </p>
          </div>
        {{/if}}
      </:card>
    </DataCard>
  </section>

  <section>
    <DataCard>
      <:title>
        <div class="au-u-flex au-u-flex--between au-u-flex--vertical-end">
          Vereniging
          <AuPill
            @skin="default"
            class="au-u-margin-bottom-tiny"
            @icon="clock-rewind"
          >Laatst gewijzigd op 22-02-2022</AuPill>
        </div>
      </:title>
      <:card as |Card|>
        <Card.Columns>
          <:left as |Item|>
            <Item>
              <:label>Naam</:label>
              <:content>
                {{this.model.association.name}}
              </:content>
            </Item>
            <Item>
              <:label>Type</:label>
              <:content>
                {{#if this.model.association.classification}}
                  <span
                    title="{{this.model.association.classification.prefLabel}}"
                  >
                    {{this.model.association.classification.notation}}
                  </span>
                {{else}}
                  Niet opgegeven
                {{/if}}
              </:content>
            </Item>
            <Item>
              <:label>Hoofdactiviteiten</:label>
              <:content>
                {{#if this.model.association.activities}}
                  {{#each
                    this.model.association.activities
                    as |activity index|
                  }}
                    {{activity.label}}{{#unless
                      (last-index index this.model.association.activities)
                    }},{{/unless}}
                  {{/each}}
                {{else}}
                  Niet opgegeven
                {{/if}}
              </:content>
            </Item>

            <Item>
              <:label>Beschrijving</:label>
              <:content>
                {{#if this.model.association.description}}
                  {{this.model.association.description}}
                {{else}}
                  Niet opgegeven
                {{/if}}
              </:content>
            </Item>
          </:left>
          <:right as |Item|>
            <Item>
              <:label>Minimum leeftijd</:label>
              <:content>
                {{#if this.model.association.targetAudience}}
                  {{this.model.association.targetAudience.minimumLeeftijd}}
                {{else}}
                  Niet opgegeven
                {{/if}}
              </:content>
            </Item>
            <Item>
              <:label>Maximum leeftijd</:label>
              <:content>
                {{#if this.model.association.targetAudience}}
                  {{this.model.association.targetAudience.maximumLeeftijd}}
                {{else}}
                  Niet opgegeven
                {{/if}}
              </:content>
            </Item>
            <Item>
              <:label>Koepel</:label>
              <:content>
                {{#if this.model.association.parentOrganization.name}}
                  {{this.model.association.parentOrganization.name}}
                {{else}}
                  Niet opgegeven
                {{/if}}
              </:content>
            </Item>
            <Item>
              <:label>Startdatum</:label>
              <:content>
                {{#each this.model.association.changeEvents as |changeEvent|}}
                  {{#let (get changeEvent.result "label") as |result|}}
                    {{#if (eq result "Oprichting")}}
                      {{date-format changeEvent.date}}
                    {{/if}}
                  {{/let}}
                {{else}}
                  Niet opgegeven
                {{/each}}
              </:content>
            </Item>
            <Item>
              <:label>vCode</:label>
              <:content>
                {{#each this.model.association.identifiers as |identifier|}}
                  {{#if (eq identifier.idName "vCode")}}
                    {{#if (get identifier.structuredIdentifier "localId")}}
                      {{get identifier.structuredIdentifier "localId"}}
                    {{else}}
                      Niet opgegeven
                    {{/if}}
                  {{/if}}
                {{/each}}
              </:content>
            </Item>
            <Item>
              <:label>KBO nummer</:label>
              <:content>
                {{#each this.model.association.identifiers as |identifier|}}
                  {{#if (eq identifier.idName "KBO nummer")}}
                    {{#if (get identifier.structuredIdentifier "localId")}}
                      {{get identifier.structuredIdentifier "localId"}}
                    {{else}}
                      Niet opgegeven
                    {{/if}}
                  {{/if}}
                {{/each}}
              </:content>
            </Item>
          </:right>
        </Card.Columns>
      </:card>
    </DataCard>
  </section>
</div>